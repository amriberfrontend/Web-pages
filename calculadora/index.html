<!DOCTYPE html>
<html charset="UTF-8" lang="es">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="styles.css">
        <title>Calculadora</title>
    </head>
    <body>
        <main>
            <div class="display">
                <input type="text" id="result" class="display__input" placeholder="0" readonly>
            </div>
            <div class="keypad">
                <!-- * The numbers are generated dynamically, they have the class [number] -->
                <div class="keypad__numbers" id="numbers"></div>
                <aside>
                    <div class="keypad__operators">
                        <button class="operator keypad__button" id="add">+</button>
                        <button class="operator keypad__button" id="subtract">-</button>
                        <button class="operator keypad__button" id="multiply">x</button>
                        <button class="operator keypad__button" id="divide">/</button>
                    </div>
                    <div class="keypad__controls">
                        <button class="keypad__button" id="clear">C</button>
                        <button class="keypad__button keypad__button--filled" id="equals">=</button>
                    </div>
                </aside>
                

            </div>
        </main>
        <script>
            const display = document.getElementById('result');
            const numbersContainer = document.getElementById('numbers');
            const clearButton = document.getElementById('clear');
            const equalsButton = document.getElementById('equals');

            let storedValue = 0;
            let displayedValue = 0;
            let result = 0;
            let operation = "";

            // Generate the number buttons
            for (let i = 9; i >= 0; i--) {
                const numberButton = document.createElement('button');
                numberButton.classList.add('keypad__button', 'number');
                numberButton.textContent = i;
                numberButton.addEventListener('click', () => {
                    display.value += i
                    displayedValue = parseFloat(display.value);
                });
                numbersContainer.appendChild(numberButton);
            }

            // Create the listener event for each operator button
            document.querySelectorAll('.operator').forEach(operator => {
                operator.addEventListener('click', () => {
                    operation = operator.id; // set the current operation
                    // Store the displayed value and clear the display
                    storedValue = displayedValue
                    displayedValue = 0
                    display.value = ""
                })
            });

            // Clear the values, the operation and the display
            clearButton.addEventListener('click', () => {
                storedValue = 0;
                displayedValue = 0;
                result = 0;
                operation = "";
                display.value = "";
                
            });
            equalsButton.addEventListener('click', () => {
                calculate();
            });

            // Calculate the result based on the selected operation and display it
            function calculate() {
                switch (operation) {
                    case "add":
                        result = storedValue + displayedValue;
                        break;
                    case "subtract":
                        result = storedValue - displayedValue;
                        break;
                    case "multiply":
                        result = storedValue * displayedValue;
                        break;
                    case "divide":
                        result = storedValue / displayedValue;
                        break;
                    default:
                        result = displayedValue;
                        break;
                }
                storedValue = result
                display.value = result;
            }

        </script>
    </body>
</html>